<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Android 16 风格演示（平板自适应）</title>
  <style>
    /* ===== Theme + layout (模拟 Android 16 / Material You 变体) ===== */
    :root{
      --bg:#0f1724; /* 深色壁纸基色 */
      --surface:#0b1220;
      --card:#0f1a2b;
      --accent:#7c4dff; /* 可在运行时根据壁纸动态调整 */
      --muted:rgba(255,255,255,0.65);
      --radius:18px;
      --gap:18px;
      --app-size:88px; /* 图标基础尺寸 (平板会变大) */
    }

    html,body{height:100%;}
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans SC",sans-serif;
      background: linear-gradient(180deg, rgba(12,18,30,1) 0%, rgba(6,10,18,1) 100%);
      color: #e6eef8; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      display:flex; align-items:center; justify-content:center; padding:24px;
    }

    /* 仪表板容器：在平板上呈现类似桌面格局 */
    .device {
      width: 100%; max-width:1200px; aspect-ratio: 10/7; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border-radius: 28px; box-shadow: 0 30px 80px rgba(2,6,23,0.7), inset 0 1px 0 rgba(255,255,255,0.02);
      padding:28px; box-sizing:border-box; position:relative; overflow:hidden;
      display:grid; grid-template-rows: auto 1fr auto; gap:12px;
    }

    /* 状态栏（模拟 Android 状态栏） */
    .statusbar{height:40px; display:flex; justify-content:space-between; align-items:center; padding:6px 10px; opacity:0.95}
    .statusbar .left, .statusbar .right{display:flex; align-items:center; gap:8px; font-size:13px; color:var(--muted)}

    /* 屏幕主体，包含桌面和应用窗口 */
    .screen{display:grid; grid-template-columns: 1fr 420px; gap:var(--gap); align-items:start;}

    /* 左侧为主桌面（图标和壁纸）*/
    .desktop{
      background: linear-gradient(135deg, rgba(124,77,255,0.12), rgba(0,140,255,0.05));
      border-radius:16px; padding:18px; min-height:320px; position:relative; overflow:hidden;
      display:flex; flex-direction:column; gap:18px;
    }

    /* 图标网格自适配 */
    .app-grid{display:grid; grid-template-columns: repeat(auto-fill, minmax(var(--app-size), 1fr)); gap:14px; align-items:center}
    .app{width:var(--app-size); height:var(--app-size); display:flex; flex-direction:column; align-items:center; justify-content:center; gap:8px; cursor:pointer}
    .icon{
      width:64px; height:64px; border-radius:18px; background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      display:flex; align-items:center; justify-content:center; font-weight:700; font-size:20px; box-shadow: 0 8px 22px rgba(2,6,23,0.6);
      transition:transform 220ms cubic-bezier(.2,.9,.2,1), box-shadow 200ms ease;
    }
    .app:hover .icon{ transform: translateY(-6px); box-shadow:0 18px 32px rgba(2,6,23,0.7)}
    .label{font-size:12px; color:var(--muted); text-align:center}

    /* 右侧卡片区域：展示正在运行的应用缩略和控制 */
    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:16px; padding:16px; min-height:300px}
    .panel h3{margin:0 0 8px 0; font-size:15px}
    .running-list{display:flex; flex-direction:column; gap:12px}
    .running-item{display:flex; gap:12px; align-items:center; padding:8px; border-radius:12px; background:rgba(255,255,255,0.02)}

    /* 应用窗口（浮动层）*/
    .app-window{
      position:absolute; left:50%; top:50%; transform:translate(-50%,-50%) scale(0.98);
      width:75%; height:70%; max-width:980px; max-height:720px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:22px; box-shadow:0 40px 100px rgba(2,6,23,0.7); display:none; overflow:hidden; z-index:80;
      opacity:0;
    }
    .app-window .topbar{height:56px; display:flex; align-items:center; justify-content:space-between; padding:0 14px; background:transparent}
    .app-window .content{padding:18px; height:calc(100% - 56px); overflow:auto}

    /* 打开 / 关闭 动画（近似苹果的非线性动画：更‘弹性’的缓动）*/
    .anim-open{display:block; animation:openSpring 420ms cubic-bezier(.2,1,.22,1) forwards}
    .anim-close{animation:closeSpring 360ms cubic-bezier(.4,0,.22,1) forwards}

    @keyframes openSpring{
      0%{transform: translate(-50%,-50%) scale(0.72); opacity:0}
      60%{transform: translate(-50%,-50%) scale(1.03); opacity:1}
      100%{transform: translate(-50%,-50%) scale(1); opacity:1}
    }
    @keyframes closeSpring{
      0%{transform: translate(-50%,-50%) scale(1); opacity:1}
      100%{transform: translate(-50%,-50%) scale(0.72); opacity:0; display:none}
    }

    /* 任务切换缩放 (背景模糊/缩放) */
    .device.blurred{filter: blur(6px) saturate(1.08);}

    /* Dock（底部）
       - 在平板上靠左显示应用列，移动设备下居中显示 */
    .dock{height:86px; display:flex; align-items:center; justify-content:center; gap:18px}
    .dock .dock-inner{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:10px 14px; border-radius:14px; display:flex; gap:12px}

    /* 响应式：为平板优化网格和尺寸 */
    @media (min-width:900px){
      :root{--app-size:108px}
      .screen{grid-template-columns: 1fr 360px}
      .app-window{width:60%; height:78%}
    }
    @media (min-width:1200px){
      :root{--app-size:128px}
      .device{max-width:1400px}
      .screen{grid-template-columns: 1fr 420px}
      .app-window{width:52%; height:80%}
    }

    /* 小屏适配 */
    @media (max-width:680px){
      .screen{grid-template-columns:1fr}
      .panel{order:2}
      .statusbar{font-size:12px}
    }

    /* 触控反馈（类似按压） */
    .icon:active{transform: scale(0.96)}

  </style>
</head>
<body>
  <div class="device" id="device">
    <div class="statusbar">
      <div class="left">上午 10:24</div>
      <div class="right">🔋 81%  •  Wi‑Fi</div>
    </div>

    <div class="screen">
      <div class="desktop" id="desktop">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <div style="font-size:20px; font-weight:700">桌面 — Android 16 风格</div>
          <div style="font-size:13px; color:var(--muted)">模拟自适应平板布局</div>
        </div>

        <div class="app-grid" id="appGrid">
          <!-- 示例应用（可自定义） -->
          <div class="app" data-app="browser">
            <div class="icon">🌐</div>
            <div class="label">浏览器</div>
          </div>
          <div class="app" data-app="mail">
            <div class="icon">✉️</div>
            <div class="label">邮件</div>
          </div>
          <div class="app" data-app="music">
            <div class="icon">🎧</div>
            <div class="label">音乐</div>
          </div>
          <div class="app" data-app="photos">
            <div class="icon">🖼️</div>
            <div class="label">图库</div>
          </div>
          <div class="app" data-app="settings">
            <div class="icon">⚙️</div>
            <div class="label">设置</div>
          </div>
          <div class="app" data-app="notes">
            <div class="icon">📝</div>
            <div class="label">便签</div>
          </div>
        </div>

        <div style="margin-top:auto">
          <div class="dock">
            <div class="dock-inner">
              <div class="app" data-app="phone"><div class="icon">📞</div><div class="label">电话</div></div>
              <div class="app" data-app="messages"><div class="icon">💬</div><div class="label">消息</div></div>
              <div class="app" data-app="camera"><div class="icon">📷</div><div class="label">相机</div></div>
            </div>
          </div>
        </div>

      </div>

      <div class="panel">
        <h3>正在运行的应用</h3>
        <div class="running-list" id="runningList">
          <div class="running-item">暂无活动</div>
        </div>
        <hr style="margin:12px 0;opacity:0.06" />
        <div style="font-size:13px;color:var(--muted)">提示：点击左侧图标打开应用。关闭按钮位于窗口右上。</div>
      </div>
    </div>

    <!-- 应用窗口模板（动态克隆） -->
    <template id="appWindowTpl">
      <div class="app-window" role="dialog">
        <div class="topbar">
          <div class="t-left"><strong class="title">应用</strong></div>
          <div class="t-right">
            <button class="closeBtn" aria-label="关闭" style="border:none;background:transparent;font-size:18px;cursor:pointer">✕</button>
          </div>
        </div>
        <div class="content">应用内容</div>
      </div>
    </template>

  </div>

  <script>
    // 简单的应用打开/关闭逻辑，带“非线性弹簧”过渡（使用 CSS 动画）
    const device = document.getElementById('device');
    const appGrid = document.getElementById('appGrid');
    const runningList = document.getElementById('runningList');
    const tpl = document.getElementById('appWindowTpl');

    // 模拟应用内容（可扩展）
    const APP_CONTENT = {
      browser: {title:'浏览器', body: '<p>这是一个示例网页视图 — Android 16 风格。</p>'},
      mail: {title:'邮件', body: '<p>收件箱为空。使用非线性动画打开/关闭。</p>'},
      music: {title:'音乐', body: '<p>播放列表：静谧夜曲、城市漫步…</p>'},
      photos: {title:'图库', body: '<p>照片缩略图...</p>'},
      settings: {title:'设置', body: '<p>系统设置演示面板。</p>'},
      notes: {title:'便签', body: '<p>记下一些想法。</p>'},
      phone: {title:'电话', body:'<p>拨号盘</p>'},
      messages: {title:'消息', body:'<p>对话列表</p>'},
      camera: {title:'相机', body:'<p>相机预览</p>'}
    }

    // 运行中的窗口引用
    const openWindows = new Map();

    function addRunningItem(id, title){
      // 创建或更新右侧运行列表
      const item = document.createElement('div');
      item.className = 'running-item';
      item.innerHTML = `<div style=\"width:44px;height:44px;border-radius:10px;background:rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center\">${title[0]||'A'}</div><div style=\"flex:1\">${title}</div><div><button data-stop=\"${id}\" style=\"border:none;background:transparent;color:var(--muted);cursor:pointer\">切换</button></div>`;
      // 点击切换到该窗口（如果存在）
      item.querySelector('button').addEventListener('click', ()=>{
        const win = openWindows.get(id);
        if(win) focusWindow(win);
      });
      runningList.innerHTML='';
      runningList.appendChild(item);
    }

    function focusWindow(win){
      // 小技巧：将窗口放到最上层并添加短暂的 scale 动画
      document.querySelectorAll('.app-window').forEach(w=> w.style.zIndex=60);
      win.style.zIndex = 120;
      // 触发一个快速焦点动画
      win.animate([
        {transform: 'translate(-50%,-50%) scale(1)'},
        {transform: 'translate(-50%,-50%) scale(1.02)'},
        {transform: 'translate(-50%,-50%) scale(1)'}
      ], {duration:220, easing:'cubic-bezier(.2,1,.22,1)'});
    }

    function openApp(appId){
      if(openWindows.has(appId)){
        focusWindow(openWindows.get(appId));
        return;
      }
      // 克隆模板
      const clone = tpl.content.firstElementChild.cloneNode(true);
      const title = APP_CONTENT[appId]?.title || appId;
      clone.querySelector('.title').textContent = title;
      clone.querySelector('.content').innerHTML = APP_CONTENT[appId]?.body || '<p>空白</p>';

      // 关闭按钮行为
      const closeBtn = clone.querySelector('.closeBtn');
      closeBtn.addEventListener('click', ()=> closeApp(appId, clone));

      // 点击窗口本身聚焦
      clone.addEventListener('mousedown', ()=> focusWindow(clone));

      document.getElementById('device').appendChild(clone);
      // 开始动画 (CSS class)
      // 为了更接近苹果的弹性动画，使用 keyframes + cubic-bezier。
      requestAnimationFrame(()=>{
        clone.classList.add('anim-open');
        clone.style.display='block';
      });

      openWindows.set(appId, clone);
      addRunningItem(appId, title);
      // 暂时模糊背景以强调前台窗口
      device.classList.add('blurred');

      // 允许拖动（简易）
      makeDraggable(clone);
    }

    function closeApp(appId, win){
      if(!win) win = openWindows.get(appId);
      if(!win) return;
      // 播放关闭动画
      win.classList.remove('anim-open');
      win.classList.add('anim-close');
      // 动画结束后移除DOM
      win.addEventListener('animationend', ()=>{
        try{ win.remove(); }catch(e){}
      }, {once:true});
      openWindows.delete(appId);
      runningList.innerHTML = '<div class="running-item">暂无活动</div>';
      device.classList.remove('blurred');
    }

    // 使窗口可拖拽（触摸友好）
    function makeDraggable(el){
      let isDown=false, startX=0, startY=0, origLeft=0, origTop=0;
      el.addEventListener('pointerdown',(e)=>{
        isDown=true; el.setPointerCapture(e.pointerId);
        const r = el.getBoundingClientRect();
        startX = e.clientX; startY = e.clientY; origLeft = r.left; origTop = r.top;
      });
      window.addEventListener('pointermove',(e)=>{
        if(!isDown) return;
        const dx = e.clientX - startX; const dy = e.clientY - startY;
        // 计算以中心为基准的 transform
        const centerX = (origLeft + dx) + (el.offsetWidth/2) - (device.offsetWidth/2);
        const centerY = (origTop + dy) + (el.offsetHeight/2) - (device.offsetHeight/2);
        el.style.transform = `translate(${centerX}px, ${centerY}px) scale(1)`; // 注意：此处覆盖原 translate(-50%,-50%) 以实现拖动
      });
      window.addEventListener('pointerup',()=>{ isDown=false; });
    }

    // 绑定图标点击
    appGrid.addEventListener('click',(e)=>{
      const a = e.target.closest('.app');
      if(!a) return;
      const id = a.dataset.app;
      openApp(id);
    });

    // 点击桌面空白处，切换全部窗口到后面（简易 Home 效果）
    document.getElementById('desktop').addEventListener('dblclick', ()=>{
      // 将所有窗口缩小并移除
      openWindows.forEach((win,id)=> closeApp(id, win));
    });

    // 为触摸设备提供更大的可点区域（模拟按压动画）
    document.querySelectorAll('.app').forEach(a=>{
      a.addEventListener('touchstart', ()=> a.classList.add('pressed'));
      a.addEventListener('touchend', ()=> a.classList.remove('pressed'));
    });

    // 可选：根据系统/壁纸动态调整 accent（示例）
    function setAccentColor(hex){ document.documentElement.style.setProperty('--accent', hex); }
    // 示例：随机颜色（真实系统会根据壁纸提取）
    // setAccentColor('#ff6b6b');

  </script>
</body>
</html>
